(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{18:function(s,t,i){"use strict";i.d(t,"a",(function(){return p}));var e=i(19),h=i.n(e),a=i(20),d=i(0);class p{constructor({renderer:s="P2D",use2D:t=!0,useMic:i=!1}){this.renderer=s,this.use2D=t,this.p,this.w=window.innerWidth,this.h=window.innerHeight,this.alpha=0,this.graphic=null,this.canvas,this.fadeFlag=!1,this.startFade=this.startFade.bind(this),this.dispose=this.dispose.bind(this),this.useMic=i,this.mic,this.meter}setup(){const s="WEBGL"===this.renderer?this.p.WEBGL:this.p.P2D;this.p.createCanvas(this.w,this.h,s),this.graphic=this.p.createGraphics(this.w,this.h),this.graphic.hide(),window.addEventListener("fade",this.startFade,!1),this.useMic&&(this.meter=new a.a,this.mic=new a.b,this.mic.open(),this.mic.connect(this.meter))}draw(){"WEBGL"===this.renderer&&this.use2D&&this.p.translate(-this.p.width/2,-this.p.height/2,0),this.fadeFlag&&(this.graphic.clear(),this.graphic.fill(0,this.alpha),this.graphic.rect(0,0,this.graphic.width,this.graphic.height),this.alpha+=2,this.alpha>d.a.ALPHA_MAX&&this.dispose())}preload(){}mousePressed(){}keyTyped(){32!==this.p.keyCode||this.fadeFlag||this.startFade()}keyPressed(){}doubleClicked(){this.p.saveCanvas("sketch","png")}init(){this.canvas=new h.a(s=>{this.p=s,this.p.preload=()=>this.preload(),this.p.setup=()=>this.setup(),this.p.draw=()=>this.draw(),this.p.mousePressed=()=>this.mousePressed(),this.p.keyTyped=()=>this.keyTyped(),this.p.keyPressed=()=>this.keyPressed(),this.p.doubleClicked=()=>this.doubleClicked()},"canvas")}startFade(){this.graphic.show(),this.fadeFlag=!0}dispose(){this.graphic.remove(),this.graphic=null,this.p.remove(),this.p=null,this.sketch=null,this.canvas=null,this.useMic&&this.mic.close(),this.mic=null,window.removeEventListener("fade",this.startFade,!1);const s=new Event("finish");window.dispatchEvent(s)}get getSketch(){return this.p}get getVolume(){return this.meter.getValue()}}},6:function(s,t,i){"use strict";i.r(t);var e=i(18),h=i(22),a=i.n(h);class d extends e.a{constructor(){super({}),this.mask,this.mask2,this.mask_array=[],this.video,this.faceapi,this.detections,this.modelLoaded=this.modelLoaded.bind(this),this.gotFaces=this.gotFaces.bind(this)}preload(){super.preload(),this.mask=this.p.loadImage("images/mask.png"),this.mask2=this.p.loadImage("images/sabito.png"),this.mask_array=[this.mask,this.mask2]}setup(){super.setup(),this.p.background(0),this.mask.loadPixels(),this.mask2.loadPixels(),this.video=this.p.createCapture(this.p.VIDEO),this.video.size(this.p.width,this.p.height),this.video.hide();this.faceapi=a.a.faceApi(this.video,{withLandmarks:!0,withDescriptors:!1},this.modelLoaded)}modelLoaded(){this.faceapi.detect(this.gotFaces)}gotFaces(s,t){if(s)console.log(s);else if(this.detections=t,this.p){if(this.p.background(0),this.p.push(),this.p.translate(this.p.width,0),this.p.scale(-1,1),this.p.image(this.video,0,0,this.p.width,this.p.height),this.detections&&this.detections.length>0){let s=0;for(let t=0,i=this.detections.length;t<i;t++)this.p.image(this.mask_array[s],this.detections[t].detection.box.left,this.detections[t].detection.box.top,this.detections[t].landmarks.imageWidth,this.detections[t].landmarks.imageHeight),s++,2===s&&(s=0)}this.p.pop(),this.faceapi.detect(this.gotFaces)}}dispose(){super.dispose(),this.mask=null,this.video.remove(),this.video=null,this.faceapi=null,this.gotFaces=null}}t.default=function(){(new d).init()}}}]);